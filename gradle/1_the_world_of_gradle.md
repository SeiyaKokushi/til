# Gradleの世界
## Gradleとは
　次世代のビルドツールとして注目を集めているオープンソースのプロダクト。Androidアプリケーション開発のビルドツールとして採用。  
　既存のビルドツールに比べて、優れている点が多い。  
　**Gradleのビルドスクリプトは非常にシンプルに記述できる。**  
　**Gradleは既存のAntタスクやAntビルドスクリプト、さらにMavenリポジトリを利用できる。**(MavenのプラグインはGradleから利用できない)  

### ビルドツールとは
　ソフトウェア開発においては、多くの定型的な作業が必要となる。  
　例えば、Javaアプリケーションの開発では...
- ソースコード(.java)をコンパイルしてクラスファイル(.class)を生成
- コーディング規約への適合性などをチェック
- ソースコードの静的解析を行う
- テストを実行してテスト結果やカバレッジ測定結果をレポートとして出力する
- Javadocなどのドキュメントを生成する
- クラスファイルやリソースファイルなどをパッケージングしてアーカイブ(.jarや.warなど)を生成する
- アーカイブをテスト環境やステージング環境などにリリースする
- アーカイブをリポジトリに登録する

　**ビルドツールとは、これらの定型的な作業を自動化するためのソフトウェア。**    

　ビルドツールを利用しない場合に直面する問題の例...
- ソースコードを修正してテストをするたびに手作業でコンパイル/テスト/パッケージング/リリースを行う必要があり、毎回時間と手間がかかる。さらに、手作業によるミスの発生が多い。
- 開発チームに新しいメンバーが参加したので、開発中のアプリケーションを試しに動かしてもらうことにした。しかし、作業手順が古く、ソースコードリポジトリからチェックアウトしてきた後の手順がうまくいかず、動かない。
- 開発者のローカルマシンではビルドが通るが、テスト環境ではビルドが失敗する。OSなどの環境が違うためだと思われるが、原因が分からない。
- プロジェクトのビルドに必要なオープンソースのライブラリを手動でダウンロードする必要があり、手間がかかる。そのライブラリが別のライブラリを要求、という様に依存関係を考慮しなければならず、必要な環境を整えるために何回もコンパイルして試行錯誤を繰り返すことになる。
- 開発したライブラリをオープンソースとして公開したが、ソースコードからバイナリを作る方法が難解で、なかなか使ってもらえない。  

　ビルドツールを適用することで、この様な問題のある程度を解決できる。
一般的なビルドツールでは、ビルドの順番をビルドスクリプトとして記述し、このスクリプトを解釈することで、様々な作業を自動化できる。
つまり、ビルド手順書が単なる**ドキュメントではなく、実行可能なプログラム**になる。  
　ビルド手順書が実行可能であることのメリット...
- 定型的な作業に人間が労力を費やす必要がなくなり、ミスが混在するリスクも排除できる。
- ビルドスクリプトが常に使われ、メンテナンスされることで、ドキュメントのように陳腐化するリスクが少ない。
- 環境の差異を認識して、環境ごとに異なる処理に対して条件分岐などで対応できる。  
　**"定型的な作業から人間を解放する"**→人間には人間にしかできない、より本質的な仕事に注力できるようになる。    

### ビルドツールの歴史
　ビルドツールは開発者にとっては縁の下の力持ち的な存在であり、比較的地味な存在。
しかし、時代の流れに伴って着実に発展している。

#### 元祖ビルドツール Make
　ソフトウェア開発の世界に**ビルド**という概念を初めて持ち込んだツール。  
　C言語などで開発されたソフトウェアのビルドにおいては、Makeはいまだ現役で使われている。
しかし、SConsなどの新しいビルドツールも登場。

#### Javaのためのビルドツール Ant
　Javaに適用するにはMakeではやや都合が悪い面があり、登場したのがAnt。  
　JavaとXMLを採用することで、Makeの弱点であったプラットフォーム依存から脱却。
Javaの流行と相まって、AntはJava系プロジェクトではデフォルトのビルドツールとしての地位を確立。
Make同様にいまだに現役。  
　Antが提供する機能はそれほど多くなく、シンプルで使いやすい反面、ちょっと複雑なことをしようとすると、ビルドスクリプトが長大になってしまい、メンテナンスが困難になる。
Javaでは豊富なライブラリを組み合わせて開発を行うのが一般的だが、Antにはライブラリの依存関係を管理する仕組みがなく、ライブラリの管理がビルド職人にとっては悩みの種だった。

#### ビルドツールの革新者 Maven
　Antの問題を解決すべく登場したのが、Maven。
JavaとXMLによるプラットフォーム独立のアーキテクチャはAntと同じ。
ビルドツールにビルドライフサイクルとプロジェクトオブジェクトモデル(POM)という概念を持ち込むことで、Antの弱点であった"ビルドスクリプトの冗長化"を解決。  
　また、POMにメタデータを持たせることで、ライブラリの依存関係を自動的に解決する仕組みを構築することに成功。  
　高性能である反面、暗黙的な規約を理解しなければならず、標準の規約から外れたことをしようとすると、途端に難易度が高くなる。

#### そして Gradle
　これまでのビルドツールの良い点やエコシステムを踏襲しつつ、欠点を解消することを目剤している新しいビルドツール。    

　Gradleまでの進化の流れ
1. Make: ビルドというコンセプトの確立
2. Ant: 凡用性を高める(=クロスプラットフォーム化)
3. Maven: ビルドスクリプトの記述を効率化する(=規約ベース)
4. Gradle: 柔軟性を高める(=スクリプト言語への回帰)

### Gradleの概要
　GradleプロジェクトのWebサイトでは、Gradleとは**Build Automation Evolved**、"ビルド自動化ツールの進化形"であると紹介されている。
この"進化"には次の2つの意味が込められている。
- Gradleは単なるビルド自動化だけでなく、テストの実行や成果物の公開、リリースなどのソフトウェア開発における各種タスクの自動化や、静的なWebサイトの生成、ドキュメントの生成といった、ソフトウェア開発以外のプロジェクトの自動化にも適用できる。
- GradleはAntの柔軟性、Mavenの依存性管理と規約といった過去のビルドツールの良い点を組み合わせ、さらにGroovy DSLなどのアイデアを投入することで、より効率的なビルドが行えるようにそれらを昇華させている。    

　Gradleの主な特徴
- 拡張可能なGradleビルド言語(DSL)の提供
- ビルドの分割や共通部品抽出などの体系化の容易さ
- IDEなどと連携するため、Gradleを外部からコントロールするためのAPIを提供
- インクリメンタルビルドや並列ビルドなどでビルドを効率化
- マルチプロジェクトサポートの柔軟性
- Maven/Ivyリポジトリからローカルファイルシステムまで多様な依存性管理手法に対応
- Antタスクだけでなく、Antプロジェクト全体とのインテグレーションに対応
- ビルドスクリプトの記述言語としてGroovyを利用
- Gradleラッパーによって、Gradleがインストールされていない環境でもビルドが実行可能
- 互換性への配慮    

　[Gradleプロジェクト公式Webサイト](http://www.gradle.org/)
ソースコードはGitHubで公開されている。  
　より詳しいGradleの内容は、ユーザーガイドを参照。  
　[Gradle User Guide](http://www.gradle.org/documentation/)  
　[Gradle ユーザーガイド(日本語翻訳版)](http://gradle.monochromeroad.com/docs/)

### Gradleの事例
　Gradleは比較的新しいプロダクトにも関わらず、多くのプロジェクトで利用されている。  
　Gradleは多くの企業やアプリケーションなどに採用されており、普及が進んでいくと予想される。  
　Gradle2.0以降では、C/C++/Objective-Cなどのネイティブ系言語のビルドや、Microsoft Visual Studioとの連携など、Javaのエコシステムを越えた機能強化が行われている。

## なぜGradleなのか?

